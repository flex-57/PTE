<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8"/>
		<meta name="viewport" content="width=device-width,initial-scale=1"/>
		<title>
			{% block title %}
				EPT
			{% endblock %}
		</title>
		{% block stylesheets %}{% endblock %}
		{% block javascripts %}
			{% block importmap %}
				{{ importmap('app') }}
				<script src="https://cdn.tailwindcss.com"></script>
				<script src="https://kit.fontawesome.com/228967fa11.js" crossorigin="anonymous"></script>
			{% endblock %}
		{% endblock %}
	</head>

	<body class="text-gray-900 dark:text-gray-100 dark:bg-gray-900 transition-colors">
		<nav class="bg-white dark:bg-gray-800 shadow-sm sticky top-0 z-50 transition-colors">
			<div
				class="container mx-auto px-4 py-3 flex justify-between items-center">
				<!-- Logo -->
				<a href="{{ path('home') }}" class="flex items-center space-x-2 font-bold text-gray-800 dark:text-white hover:text-blue-600 dark:hover:text-blue-400 transition">
					<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewbox="0 0 24 24" stroke-width="1.8" stroke="currentColor">
						<path stroke-linecap="round" stroke-linejoin="round" d="M3 9.75L12 3l9 6.75v9.75A1.5 1.5 0 0 1 19.5 21h-15A1.5 1.5 0 0 1 3 19.5V9.75z"/>
						<path stroke-linecap="round" stroke-linejoin="round" d="M9 21V12h6v9"/>
					</svg>
					<span>EPT</span>
				</a>

				<!-- Menu utilisateur + thème -->
				<div class="flex items-center space-x-4">
					{% if app.user %}
						<div class="relative group">
							<button class="flex items-center space-x-2 text-gray-700 dark:text-gray-200 hover:text-blue-600 transition">
								<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewbox="0 0 24 24" stroke-width="1.8" stroke="currentColor">
									<path stroke-linecap="round" stroke-linejoin="round" d="M15.75 7.5a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0zM4.5 19.5a8.25 8.25 0 0 1 15 0"/>
								</svg>
								<span>{{ app.user.userIdentifier }}</span>
								<svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4 transition-transform group-hover:rotate-180" fill="none" viewbox="0 0 24 24" stroke-width="2" stroke="currentColor">
									<path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/>
								</svg>
							</button>

							<!-- Dropdown -->
							<div class="absolute right-0 mt-2 py-2 w-52 bg-white dark:bg-gray-700 rounded-md shadow-lg invisible group-hover:visible opacity-0 group-hover:opacity-100 transition-all z-10">
								<a href="{{ path('admin') }}" class="flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600 space-x-2 transition">
									<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-blue-600" fill="none" viewbox="0 0 24 24" stroke-width="1.8" stroke="currentColor">
										<path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3.75h6.5v6.5h-6.5v-6.5zM13.75 3.75h6.5v6.5h-6.5v-6.5zM3.75 13.75h6.5v6.5h-6.5v-6.5zM13.75 13.75h6.5v6.5h-6.5v-6.5z"/>
									</svg>
									<span>Administration</span>
								</a>
								<a href="{{ path('app_logout') }}" class="flex items-center px-4 py-2 text-sm text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-600 space-x-2 transition">
									<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-red-600" fill="none" viewbox="0 0 24 24" stroke-width="1.8" stroke="currentColor">
										<path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6A2.25 2.25 0 0 0 5.25 5.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0l3-3m0 0l-3-3m3 3H9"/>
									</svg>
									<span>Déconnexion</span>
								</a>
							</div>
						</div>
					{% else %}
						<a href="{{ path('app_login') }}" class="flex items-center space-x-2 text-sm text-blue-600 hover:text-blue-800 transition">
							<svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5" fill="none" viewbox="0 0 24 24" stroke-width="1.8" stroke="currentColor">
								<path stroke-linecap="round" stroke-linejoin="round" d="M8.25 9V5.25A2.25 2.25 0 0 1 10.5 3h6A2.25 2.25 0 0 1 18.75 5.25v13.5A2.25 2.25 0 0 1 16.5 21h-6a2.25 2.25 0 0 1-2.25-2.25V15m-3 0l-3-3m0 0l3-3m-3 3h12.75"/>
							</svg>
							<span>Connexion</span>
						</a>
					{% endif %}
				</div>
			</div>
		</nav>

		<!-- CONTENU PRINCIPAL -->
		<main class="container mx-auto mt-8 px-4"> {% block body %}{% endblock %}
			</main>

			<footer class="text-center text-sm text-gray-600 py-6">
				©
				{{ 'now'|date('Y') }}
				EPT — Tous droits réservés.
			</footer>
		</body>
	</html>
