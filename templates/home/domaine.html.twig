{% extends 'base.html.twig' %}

{% block title %}
	{{ parent() }} :: {{ domaine.nom }}
{% endblock %}

{% block body %}
	<h1 class="text-3xl font-bold mb-6 text-gray-800">Domaine :
		{{ domaine.nom }}
	</h1>
	<section class="mb-6">
		<h2 class="text-2xl font-semibold">Description</h2>
		<p class="mt-2 text-gray-700">{{ domaine.description|default('') }}</p>
	</section>

	<section class="mb-10">
		<h2 class="text-2xl font-semibold mb-4">Métiers</h2>
		{% if domaine.metiers|length > 0 %}
			<div class="grid gap-3 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
				{% for m in domaine.metiers %}
					{% set card_params = {
                        link: path('metier_show', {'id': m.id}),
                        title: m.nom,
                        description: m.description|length > 80 ? m.description|slice(0, 80) ~ '...' : m.description,
                        details: [
                            {'key':'Critères', 'value': m.criteres|length},
                        ],
                        color: '#00495f',
                    } %}
					{% include '_includes/_card.html.twig' with card_params %}
				{% endfor %}
			</div>
		{% endif %}
	</section>

	<section class="mb-10">
		<h2 class="text-2xl font-semibold mb-4">Ateliers</h2>
		{% if domaine.ateliers|length > 0 %}
			<div class="grid gap-3 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
				{% for a in domaine.ateliers %}
					{% set card_params = {
                        link: path('atelier_show', {'id': a.id}),
                        title: a.nom,
                        description: a.description|length > 80 ? a.description|slice(0, 80) ~ '...' : a.description,
                        details: [
                            {'key':'Critères', 'value': a.criteres|length},
                        ],
                        color: '#007239',
                    } %}
					{% include '_includes/_card.html.twig' with card_params %}
				{% endfor %}
			</div>
		{% endif %}
	</section>
{% endblock %}
